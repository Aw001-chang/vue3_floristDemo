(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2102cc"],{b789:function(e,t,o){"use strict";o.r(t);var c=o("7a23");const l={class:"page-body-padding container pb-7"},a={class:"row justify-content-center"},s={class:"col-lg-10 mt-5"},r=Object(c["createStaticVNode"])('<h1 class="text-center text-brown">購物車</h1><div class="row justify-content-center mt-5 mb-md-5"><div class="col-lg-8"><div class="row process"><div class="col-4 text-maroon text-center pb-2 border-bottom border-5 border-maroon"><span>STEP 01</span><div class="fs-5 fw-bold mt-2 mb-2">建立訂單</div></div><div class="col-4 text-maroon text-center pb-2 border-bottom border-5"><span>STEP 02</span><div class="fs-5 fw-bold mt-2 mb-2">確認付款</div></div><div class="col-4 text-maroon text-center pb-2 border-bottom border-5"><span>STEP 03</span><div class="fs-5 fw-bold mt-2 mb-2">完成訂單</div></div></div></div></div>',2),n={class:"row justify-content-between pt-7"},d={class:"col-md-6 col-lg-5 text-brown mb-5 mb-md-0"},i=Object(c["createElementVNode"])("div",{class:"h4 mb-4 text-center text-md-start"},"訂購商品",-1),b={class:"photo"},m=["src"],u={class:"px-3 good-title"},p={class:"text-line-height-48 mb-2"},j={class:"text-2-line fw-bold"},O={class:"fw-bold mb-2"},V={class:"btn-group"},f=["onClick"],N=Object(c["createElementVNode"])("i",{class:"bi bi-dash-lg"},null,-1),v=[N],h=["onUpdate:modelValue","disabled","onClick"],E=["onClick"],g=Object(c["createElementVNode"])("i",{class:"bi bi-plus-lg"},null,-1),x=[g],w={class:"fs-5 ms-auto"},C=["onClick"],k=Object(c["createElementVNode"])("i",{class:"bi bi-trash"},null,-1),y=[k],T={class:"input-group mb-3 pt-4 pb-4"},S={class:"text-end"},B={class:"fs-5 fw-bold"},P={class:"col-md-6 text-brown"},q=Object(c["createElementVNode"])("div",{class:"h4 mb-4 text-brown text-center text-md-start mt-5 mt-md-0"},"訂購人資訊",-1),U={class:"mb-3"},D=Object(c["createElementVNode"])("label",{class:"form-label fw-bold",for:"emil"},[Object(c["createTextVNode"])("電子信箱 "),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1),W={class:"mb-3"},I=Object(c["createElementVNode"])("label",{for:"收件人姓名",class:"form-label fw-bold"},[Object(c["createTextVNode"])("收件人姓名 "),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1),L={class:"mb-3"},z=Object(c["createElementVNode"])("label",{for:"收件人電話",class:"form-label fw-bold"},[Object(c["createTextVNode"])("收件人電話 "),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1),F={class:"mb-3"},$=Object(c["createElementVNode"])("label",{for:"收件人地址",class:"form-label fw-bold"},[Object(c["createTextVNode"])("收件人地址 "),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1),M={class:"mb-3"},_=Object(c["createElementVNode"])("label",{for:"message",class:"form-label fw-bold"},"備註",-1),J=Object(c["createElementVNode"])("div",{class:"text-center mt-5"},[Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-toffee"},"送出訂單")],-1),A={key:0,class:"col-12 mt-md-5"},R={class:"d-flex border-top pt-5 justify-content-between align-center mb-4"},G=Object(c["createElementVNode"])("div",{class:"h4 mb-0 text-brown"},"瀏覽紀錄",-1),H={class:"goods row"},K={class:"card h-100 position-relative"},Q=Object(c["createElementVNode"])("div",{class:"btn-sm rounded-circle btn-toffee position-absolute top-0 end-0 m-2"},[Object(c["createElementVNode"])("i",{class:"bi bi-bookmark text-white"})],-1),X=["onClick"],Y=["src"],Z=["onClick"],ee=Object(c["createElementVNode"])("i",{class:"bi bi-cart3 me-2"},null,-1),te=Object(c["createTextVNode"])("加入購物車"),oe=[ee,te],ce={class:"card-body text-line-height"},le={class:"h5 text-brown text-2-line"},ae={class:"text-maroon position-absolute bottom-0 pb-3"};function se(e,t,o,N,g,k){const ee=Object(c["resolveComponent"])("Loading"),te=Object(c["resolveComponent"])("Field"),se=Object(c["resolveComponent"])("ErrorMessage"),re=Object(c["resolveComponent"])("Form"),ne=Object(c["resolveComponent"])("swiper-slide"),de=Object(c["resolveComponent"])("swiper");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(ee,{active:g.isLoading},null,8,["active"]),Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",a,[Object(c["createElementVNode"])("div",s,[r,Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("div",d,[i,g.cart.carts?(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(g.cart.carts,t=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"pb-4 px-md-3 border-bottom d-flex mb-4",key:t.id},[Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("img",{src:t.product.imageUrl,alt:""},null,8,m)]),Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("div",j,Object(c["toDisplayString"])(t.product.title),1)]),Object(c["createElementVNode"])("div",O,"NT$ "+Object(c["toDisplayString"])(t.product.price),1),Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("button",{type:"button",class:Object(c["normalizeClass"])(["btn btn-outline-toffee",{disabled:t.qty<=1}]),onClick:o=>e.updateCart(t,t.qty--)},v,10,f),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",class:"text-center form-control rounded-0 border-start-0 border-end-0 border-toffee","onUpdate:modelValue":e=>t.qty=e,disabled:t.id===g.status.loadingItem,onClick:o=>e.updateCart(t)},null,8,h),[[c["vModelText"],t.qty,void 0,{number:!0}]]),Object(c["createElementVNode"])("button",{type:"button",class:Object(c["normalizeClass"])(["btn btn-outline-toffee",{disabled:t.qty>=10}]),onClick:o=>e.updateCart(t,t.qty++)},x,10,E)])]),Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-toffee btn-sm",onClick:e=>k.deleteCart(t)},y,8,C)])]))),128)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",T,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入折扣碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":t[0]||(t[0]=e=>g.couponCode=e)},null,512),[[c["vModelText"],g.couponCode]]),Object(c["createElementVNode"])("button",{class:"btn btn-toffee",type:"button",onClick:t[1]||(t[1]=(...e)=>k.useCoupon&&k.useCoupon(...e))},"套用折價券")]),Object(c["createElementVNode"])("div",S,[Object(c["createElementVNode"])("div",B,"總計: NT$ "+Object(c["toDisplayString"])(g.finalTotal),1)])]),Object(c["createElementVNode"])("div",P,[q,Object(c["createVNode"])(re,{class:"shadow p-4 mb-5 bg-body rounded",onSubmit:e.createdOrder},{default:Object(c["withCtx"])(({errors:e})=>[Object(c["createElementVNode"])("div",U,[D,Object(c["createVNode"])(te,{name:"email",type:"email",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入電子信箱",rules:"email|required",modelValue:g.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=e=>g.form.user.email=e)},null,8,["class","modelValue"]),Object(c["createVNode"])(se,{name:"email",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",W,[I,Object(c["createVNode"])(te,{name:"收件人姓名",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":e["收件人姓名"]}]),placeholder:"請輸入收件人姓名",rules:"required",modelValue:g.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=e=>g.form.user.name=e)},null,8,["class","modelValue"]),Object(c["createVNode"])(se,{name:"收件人姓名",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",L,[z,Object(c["createVNode"])(te,{name:"收件人電話",type:"number",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":e["收件人電話"]}]),placeholder:"請輸入收件人電話",rules:"required",modelValue:g.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=e=>g.form.user.tel=e)},null,8,["class","modelValue"]),Object(c["createVNode"])(se,{name:"收件人電話",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",F,[$,Object(c["createVNode"])(te,{name:"收件人地址",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":e["收件人地址"]}]),placeholder:"請輸入收件人地址",rules:"required",modelValue:g.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=e=>g.form.user.address=e)},null,8,["class","modelValue"]),Object(c["createVNode"])(se,{name:"收件人地址",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",M,[_,Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{name:"",class:"form-control",rows:"3","onUpdate:modelValue":t[6]||(t[6]=e=>g.form.message=e)},null,512),[[c["vModelText"],g.form.message]])]),J]),_:1},8,["onSubmit"])]),0!==g.recentWatched.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",A,[Object(c["createElementVNode"])("div",R,[G,Object(c["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...e)=>k.deleteStorage&&k.deleteStorage(...e)),type:"button",class:"btn btn-sm btn-outline-toffee"},"清除瀏覽紀錄")]),Object(c["createElementVNode"])("div",H,[""!==g.recentWatched?(Object(c["openBlock"])(),Object(c["createBlock"])(de,{key:0,slidesPerView:1.7,spaceBetween:20,autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{1200:{slidesPerView:4,spaceBetween:24},992:{slidesPerView:3},768:{slidesPerView:3}},modules:e.modules,class:"bookSwiper rounded-4 h-100 p-2"},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(k.filterStorageItem,t=>(Object(c["openBlock"])(),Object(c["createBlock"])(ne,{key:t.id},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",K,[Q,Object(c["createElementVNode"])("a",{class:"img-box",onClick:o=>e.getProductId(t.id)},[Object(c["createElementVNode"])("img",{src:t.imageUrl,class:"card-img-top",alt:"..."},null,8,Y)],8,X),Object(c["createElementVNode"])("a",{onClick:o=>e.addToCart(t),class:"add-to-cart d-block text-white text-center pt-1 pb-1 btn-toffee"},oe,8,Z),Object(c["createElementVNode"])("div",ce,[Object(c["createElementVNode"])("div",le,Object(c["toDisplayString"])(t.title),1),Object(c["createElementVNode"])("span",ae,"NT$ "+Object(c["toDisplayString"])(t.price),1)])])]),_:2},1024))),128))]),_:1},8,["slidesPerView","modules"])):Object(c["createCommentVNode"])("",!0)])])):Object(c["createCommentVNode"])("",!0)])])])])],64)}o("caad");var re=o("c808"),ne=o("dc76"),de={inject:["emitter"],mixins:[re["a"],ne["a"]],data(){return{allProducts:[],cart:[],total:"",finalTotal:"",status:{loadingItem:""},couponCode:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},recentWatched:JSON.parse(localStorage.getItem("recentWatched"))||[],isLoading:!1}},methods:{deleteCart(e){const t="https://vue3-course-api.hexschool.io/api/anpo/cart/"+e.id;this.$http.delete(t).then(e=>{this.getCartProducts()})},useCoupon(){const e="https://vue3-course-api.hexschool.io/api/anpo/coupon",t={code:this.couponCode};this.$http.post(e,{data:t}).then(e=>{this.getCartProducts(),this.finalTotal=e.data.final_total})},deleteStorage(){this.isLoading=!0,localStorage.removeItem("recentWatched"),this.recentWatched=[];const e=this;setTimeout(()=>{this.isLoading=!1,e.scrollTop()},2e3)},scrollTop(){window.scrollTo({top:0,behavior:"smooth"})}},computed:{filterStorageItem(){return this.allProducts.filter(e=>{if(this.recentWatched.includes(e.id))return e})}},mounted(){this.emitter.on("formData",e=>{this.form=e}),this.emitter.on("getCarts",e=>{this.cart=e}),this.emitter.on("getFinalTotal",e=>{this.finalTotal=e}),this.emitter.on("all",e=>{this.allProducts=e}),this.emitter.on("recentWatch",e=>{this.recentWatched=e}),this.getCartProducts(),this.getAllProducts()}},ie=o("d959"),be=o.n(ie);const me=be()(de,[["render",se]]);t["default"]=me}}]);
//# sourceMappingURL=chunk-2d2102cc.c8060049.js.map