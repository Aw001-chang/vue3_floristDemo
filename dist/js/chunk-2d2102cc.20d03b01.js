(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2102cc"],{b789:function(e,t,c){"use strict";c.r(t);var s=c("7a23");const l={class:"page-body-padding container pb-7"},a={class:"row justify-content-center"},o={class:"col-lg-10 mt-5"},b=Object(s["i"])('<h1 class="text-center text-brown">購物車</h1><div class="row justify-content-center mt-5 mb-md-5"><div class="col-lg-8"><div class="row process"><div class="col-4 text-maroon text-center pb-2 border-bottom border-5 border-maroon"><span>STEP 01</span><div class="fs-5 fw-bold mt-2 mb-2">建立訂單</div></div><div class="col-4 text-maroon text-center pb-2 border-bottom border-5"><span>STEP 02</span><div class="fs-5 fw-bold mt-2 mb-2">確認付款</div></div><div class="col-4 text-maroon text-center pb-2 border-bottom border-5"><span>STEP 03</span><div class="fs-5 fw-bold mt-2 mb-2">完成訂單</div></div></div></div></div>',2),d={class:"row justify-content-between pt-7"},i={class:"col-md-6 col-lg-5 text-brown mb-5 mb-md-0"},r=Object(s["h"])("div",{class:"h4 mb-4 text-center text-md-start"},"訂購商品",-1),n={class:"photo"},m=["src"],u={class:"px-3 good-title"},h={class:"text-line-height-48 mb-2"},j={class:"text-2-line fw-bold"},O={class:"fw-bold mb-2"},p={class:"btn-group"},f=["onClick"],v=Object(s["h"])("i",{class:"bi bi-dash-lg"},null,-1),g=[v],w=["onUpdate:modelValue","disabled","onClick"],x=["onClick"],k=Object(s["h"])("i",{class:"bi bi-plus-lg"},null,-1),y=[k],C={class:"fs-5 ms-auto"},V=["onClick"],S=Object(s["h"])("i",{class:"bi bi-trash"},null,-1),T=[S],P={class:"input-group mb-3 pt-4 pb-4"},q={class:"text-end"},I={class:"fs-5 fw-bold"},U={class:"col-md-6 text-brown"},N=Object(s["h"])("div",{class:"h4 mb-4 text-brown text-center text-md-start mt-5 mt-md-0"},"訂購人資訊",-1),W={class:"mb-3"},A=Object(s["h"])("label",{class:"form-label fw-bold",for:"emil"},[Object(s["j"])("電子信箱 "),Object(s["h"])("span",{class:"text-danger"},"*")],-1),K={class:"mb-3"},L=Object(s["h"])("label",{for:"收件人姓名",class:"form-label fw-bold"},[Object(s["j"])("收件人姓名 "),Object(s["h"])("span",{class:"text-danger"},"*")],-1),$={class:"mb-3"},E=Object(s["h"])("label",{for:"收件人電話",class:"form-label fw-bold"},[Object(s["j"])("收件人電話 "),Object(s["h"])("span",{class:"text-danger"},"*")],-1),_={class:"mb-3"},F=Object(s["h"])("label",{for:"收件人地址",class:"form-label fw-bold"},[Object(s["j"])("收件人地址 "),Object(s["h"])("span",{class:"text-danger"},"*")],-1),J={class:"mb-3"},X=Object(s["h"])("label",{for:"message",class:"form-label fw-bold"},"備註",-1),Y=Object(s["h"])("div",{class:"text-center mt-5"},[Object(s["h"])("button",{type:"submit",class:"btn btn-toffee"},"送出訂單")],-1),B={key:0,class:"col-12 mt-md-5"},D={class:"d-flex border-top pt-5 justify-content-between align-center mb-4"},M=Object(s["h"])("div",{class:"h4 mb-0 text-brown"},"瀏覽紀錄",-1),R={class:"goods row"},z={class:"card h-100 position-relative"},G=Object(s["h"])("div",{class:"btn-sm rounded-circle btn-toffee position-absolute top-0 end-0 m-2"},[Object(s["h"])("i",{class:"bi bi-bookmark text-white"})],-1),H=["onClick"],Q=["src"],Z=["onClick"],ee=Object(s["h"])("i",{class:"bi bi-cart3 me-2"},null,-1),te=Object(s["j"])("加入購物車"),ce=[ee,te],se={class:"card-body text-line-height"},le={class:"h5 text-brown text-2-line"},ae={class:"text-maroon position-absolute bottom-0 pb-3"};function oe(e,t,c,v,k,S){const ee=Object(s["K"])("Loading"),te=Object(s["K"])("Field"),oe=Object(s["K"])("ErrorMessage"),be=Object(s["K"])("Form"),de=Object(s["K"])("swiper-slide"),ie=Object(s["K"])("swiper");return Object(s["A"])(),Object(s["g"])(s["a"],null,[Object(s["k"])(ee,{active:k.isLoading},null,8,["active"]),Object(s["h"])("div",l,[Object(s["h"])("div",a,[Object(s["h"])("div",o,[b,Object(s["h"])("div",d,[Object(s["h"])("div",i,[r,k.cart.carts?(Object(s["A"])(!0),Object(s["g"])(s["a"],{key:0},Object(s["I"])(k.cart.carts,t=>(Object(s["A"])(),Object(s["g"])("div",{class:"pb-4 px-md-3 border-bottom d-flex mb-4",key:t.id},[Object(s["h"])("div",n,[Object(s["h"])("img",{src:t.product.imageUrl,alt:""},null,8,m)]),Object(s["h"])("div",u,[Object(s["h"])("div",h,[Object(s["h"])("div",j,Object(s["N"])(t.product.title),1)]),Object(s["h"])("div",O,"NT$ "+Object(s["N"])(t.product.price),1),Object(s["h"])("div",p,[Object(s["h"])("button",{type:"button",class:Object(s["s"])(["btn btn-outline-toffee",{disabled:t.qty<=1}]),onClick:c=>e.updateCart(t,t.qty--)},g,10,f),Object(s["Y"])(Object(s["h"])("input",{type:"number",class:"text-center form-control rounded-0 border-start-0 border-end-0 border-toffee","onUpdate:modelValue":e=>t.qty=e,disabled:t.id===k.status.loadingItem,onClick:c=>e.updateCart(t)},null,8,w),[[s["S"],t.qty,void 0,{number:!0}]]),Object(s["h"])("button",{type:"button",class:Object(s["s"])(["btn btn-outline-toffee",{disabled:t.qty>=10}]),onClick:c=>e.updateCart(t,t.qty++)},y,10,x)])]),Object(s["h"])("div",C,[Object(s["h"])("button",{type:"button",class:"btn btn-outline-toffee btn-sm",onClick:e=>S.deleteCart(t)},T,8,V)])]))),128)):Object(s["f"])("",!0),Object(s["h"])("div",P,[Object(s["Y"])(Object(s["h"])("input",{type:"text",class:"form-control",placeholder:"請輸入折扣碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":t[0]||(t[0]=e=>k.couponCode=e)},null,512),[[s["S"],k.couponCode]]),Object(s["h"])("button",{class:"btn btn-toffee",type:"button",onClick:t[1]||(t[1]=(...e)=>S.useCoupon&&S.useCoupon(...e))},"套用折價券")]),Object(s["h"])("div",q,[Object(s["h"])("div",I,"總計: NT$ "+Object(s["N"])(k.finalTotal),1)])]),Object(s["h"])("div",U,[N,Object(s["k"])(be,{class:"shadow p-4 mb-5 bg-body rounded",onSubmit:e.createdOrder},{default:Object(s["X"])(({errors:e})=>[Object(s["h"])("div",W,[A,Object(s["k"])(te,{name:"email",type:"email",class:Object(s["s"])(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入電子信箱",rules:"email|required",modelValue:k.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=e=>k.form.user.email=e)},null,8,["class","modelValue"]),Object(s["k"])(oe,{name:"email",class:"invalid-feedback"})]),Object(s["h"])("div",K,[L,Object(s["k"])(te,{name:"收件人姓名",type:"text",class:Object(s["s"])(["form-control",{"is-invalid":e["收件人姓名"]}]),placeholder:"請輸入收件人姓名",rules:"required",modelValue:k.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=e=>k.form.user.name=e)},null,8,["class","modelValue"]),Object(s["k"])(oe,{name:"收件人姓名",class:"invalid-feedback"})]),Object(s["h"])("div",$,[E,Object(s["k"])(te,{name:"收件人電話",type:"number",class:Object(s["s"])(["form-control",{"is-invalid":e["收件人電話"]}]),placeholder:"請輸入收件人電話",rules:"required",modelValue:k.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=e=>k.form.user.tel=e)},null,8,["class","modelValue"]),Object(s["k"])(oe,{name:"收件人電話",class:"invalid-feedback"})]),Object(s["h"])("div",_,[F,Object(s["k"])(te,{name:"收件人地址",type:"text",class:Object(s["s"])(["form-control",{"is-invalid":e["收件人地址"]}]),placeholder:"請輸入收件人地址",rules:"required",modelValue:k.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=e=>k.form.user.address=e)},null,8,["class","modelValue"]),Object(s["k"])(oe,{name:"收件人地址",class:"invalid-feedback"})]),Object(s["h"])("div",J,[X,Object(s["Y"])(Object(s["h"])("textarea",{name:"",class:"form-control",rows:"3","onUpdate:modelValue":t[6]||(t[6]=e=>k.form.message=e)},null,512),[[s["S"],k.form.message]])]),Y]),_:1},8,["onSubmit"])]),0!==k.recentWatched.length?(Object(s["A"])(),Object(s["g"])("div",B,[Object(s["h"])("div",D,[M,Object(s["h"])("button",{onClick:t[7]||(t[7]=(...e)=>S.deleteStorage&&S.deleteStorage(...e)),type:"button",class:"btn btn-sm btn-outline-toffee"},"清除瀏覽紀錄")]),Object(s["h"])("div",R,[""!==k.recentWatched?(Object(s["A"])(),Object(s["e"])(ie,{key:0,slidesPerView:1.7,spaceBetween:20,autoplay:{delay:5e3,disableOnInteraction:!1},breakpoints:{768:{slidesPerView:4,spaceBetween:24}},modules:e.modules,class:"bookSwiper rounded-4 h-100 p-2"},{default:Object(s["X"])(()=>[(Object(s["A"])(!0),Object(s["g"])(s["a"],null,Object(s["I"])(S.filterStorageItem,t=>(Object(s["A"])(),Object(s["e"])(de,{key:t.id},{default:Object(s["X"])(()=>[Object(s["h"])("div",z,[G,Object(s["h"])("a",{class:"img-box",onClick:c=>e.getProductId(t.id)},[Object(s["h"])("img",{src:t.imageUrl,class:"card-img-top",alt:"..."},null,8,Q)],8,H),Object(s["h"])("a",{onClick:c=>e.addToCart(t),class:"add-to-cart d-block text-white text-center pt-1 pb-1 btn-toffee"},ce,8,Z),Object(s["h"])("div",se,[Object(s["h"])("div",le,Object(s["N"])(t.title),1),Object(s["h"])("span",ae,"NT$ "+Object(s["N"])(t.price),1)])])]),_:2},1024))),128))]),_:1},8,["slidesPerView","modules"])):Object(s["f"])("",!0)])])):Object(s["f"])("",!0)])])])])],64)}c("caad");var be=c("c808"),de=c("dc76"),ie={inject:["emitter"],mixins:[be["a"],de["a"]],data(){return{allProducts:[],cart:[],total:"",finalTotal:"",status:{loadingItem:""},couponCode:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},recentWatched:JSON.parse(localStorage.getItem("recentWatched"))||[],isLoading:!1}},methods:{deleteCart(e){const t="https://vue3-course-api.hexschool.io/api/anpo/cart/"+e.id;this.$http.delete(t).then(e=>{this.getCartProducts()})},useCoupon(){const e="https://vue3-course-api.hexschool.io/api/anpo/coupon",t={code:this.couponCode};this.$http.post(e,{data:t}).then(e=>{this.getCartProducts(),this.finalTotal=e.data.final_total})},deleteStorage(){this.isLoading=!0,localStorage.removeItem("recentWatched"),this.recentWatched=[];const e=this;setTimeout(()=>{this.isLoading=!1,e.scrollTop()},2e3)},scrollTop(){window.scrollTo({top:0,behavior:"smooth"})}},computed:{filterStorageItem(){return this.allProducts.filter(e=>{if(this.recentWatched.includes(e.id))return e})}},mounted(){this.emitter.on("formData",e=>{this.form=e}),this.emitter.on("getCarts",e=>{this.cart=e}),this.emitter.on("getFinalTotal",e=>{this.finalTotal=e}),this.emitter.on("all",e=>{this.allProducts=e}),this.emitter.on("recentWatch",e=>{this.recentWatched=e}),this.getCartProducts(),this.getAllProducts()}},re=c("d959"),ne=c.n(re);const me=ne()(ie,[["render",oe]]);t["default"]=me}}]);
//# sourceMappingURL=chunk-2d2102cc.20d03b01.js.map